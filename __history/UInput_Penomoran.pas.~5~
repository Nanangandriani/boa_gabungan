unit UInput_Penomoran;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, RzButton, RzCmboBx,
  Vcl.Mask, RzEdit, Vcl.ExtCtrls, RzPanel, RzBtnEdt, Data.DB, MemDS, DBAccess,
  Uni;

type
  TFInput_Penomoran = class(TForm)
    RzPanel1: TRzPanel;
    Label1: TLabel;
    Label2: TLabel;
    Label3: TLabel;
    Label4: TLabel;
    Label5: TLabel;
    Label6: TLabel;
    LabelHasil: TLabel;
    RzEdit1: TRzEdit;
    RzEdit2: TRzEdit;
    RzEdit4: TRzEdit;
    RzComboBox1: TRzComboBox;
    CBKomponen_No: TRzComboBox;
    btnplus: TRzBitBtn;
    ListBox1: TListBox;
    RzPanel2: TRzPanel;
    RzBitBtn4: TRzBitBtn;
    RzBitBtn5: TRzBitBtn;
    btnplus2: TRzBitBtn;
    Ed_Komp: TRzButtonEdit;
    UniQuery1: TUniQuery;
    Edbut_th: TRzButtonEdit;
    Edbut_bln: TRzButtonEdit;
    Edbut_tgl: TRzButtonEdit;
    Edbut_counter: TRzButtonEdit;
    Edbut_pemisah: TRzButtonEdit;
    procedure RzBitBtn5Click(Sender: TObject);
    procedure FormShow(Sender: TObject);
    procedure CBKomponen_NoSelect(Sender: TObject);
    procedure Ed_KompButtonClick(Sender: TObject);
    procedure Edbut_thButtonClick(Sender: TObject);
    procedure Edbut_blnButtonClick(Sender: TObject);


  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  FInput_Penomoran: TFInput_Penomoran;

implementation

{$R *.dfm}

uses UDataModule;


function buttonCreate(onClickEvent: TProcedure;
  left: integer; top: integer; width: integer; height: integer;
  anchors: TAnchors; caption: string; parent: TWinControl; form: TForm): TButton;
var
  theButton: TButton;
begin
  theButton := TButton.Create(form);
  theButton.width := width;
  theButton.height := height;
  theButton.left := left;
  theButton.top := top;
  theButton.parent := parent;
  theButton.anchors := anchors;
  //theButton.OnClick := onClickEvent;
  theButton.Caption := caption;
  result := theButton;
end;

procedure TFInput_Penomoran.Ed_KompButtonClick(Sender: TObject);
begin
  btnplus.Visible:=true;
  Ed_Komp.Visible:=false;
  btnplus2.Visible:=false;
end;

procedure TFInput_Penomoran.FormShow(Sender: TObject);
begin
   LabelHasil.Caption:='';
   Ed_Komp.Visible:=false;
   btnplus2.Visible:=false;
   btnplus.Visible:=true;
end;

procedure TFInput_Penomoran.RzBitBtn5Click(Sender: TObject);
begin
   Close;
end;

procedure TFInput_Penomoran.Edbut_blnButtonClick(Sender: TObject);
begin
   Edbut_bln.Clear;
   Edbut_bln.visible:=false;
end;

procedure TFInput_Penomoran.Edbut_thButtonClick(Sender: TObject);
begin
  Edbut_th.Clear;
  Edbut_th.visible:=false;
end;

procedure TFInput_Penomoran.CBKomponen_NoSelect(Sender: TObject);
begin
   if CBKomponen_No.ItemIndex=0 then
   begin
      with uniquery1 do
      begin
        close;
        sql.Clear;
        sql.Create.Add(' SELECT date_part(''year'', now()) Tahun ');
        Open;
      end;
      Edbut_th.Text:=uniquery1.FieldByName('tahun').AsString;
      ListBox1.Items.Add(Edbut_th.Text);

   end
   else
   if CBKomponen_No.ItemIndex=1 then
   begin
      with uniquery1 do
      begin
        close;
        sql.Clear;
        sql.Create.Add(' SELECT date_part(''month'', now()) bulan ');
        Open;
      end;
      Edbut_bln.Text:=uniquery1.FieldByName('bulan').AsString;
      ListBox1.Items.Add(Edbut_th.Text);

   end

   if CBKomponen_No.ItemIndex=4 then
   begin
     btnplus.Visible:=false;
     Ed_Komp.Visible:=true;
     btnplus2.Visible:=true;
   end
   else
   begin
      btnplus.Visible:=true;
      Ed_Komp.Visible:=false;
      btnplus2.Visible:=false;
   end;


end;

end.
