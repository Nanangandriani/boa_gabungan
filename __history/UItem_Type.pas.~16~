unit UItem_Type;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, dxSkinsCore, dxSkinBasic, dxSkinBlack,
  dxSkinBlue, dxSkinBlueprint, dxSkinCaramel, dxSkinCoffee, dxSkinDarkroom,
  dxSkinDarkSide, dxSkinDevExpressDarkStyle, dxSkinDevExpressStyle, dxSkinFoggy,
  dxSkinGlassOceans, dxSkinHighContrast, dxSkiniMaginary, dxSkinLilian,
  dxSkinLiquidSky, dxSkinLondonLiquidSky, dxSkinMcSkin, dxSkinMetropolis,
  dxSkinMetropolisDark, dxSkinMoneyTwins, dxSkinOffice2007Black,
  dxSkinOffice2007Blue, dxSkinOffice2007Green, dxSkinOffice2007Pink,
  dxSkinOffice2007Silver, dxSkinOffice2010Black, dxSkinOffice2010Blue,
  dxSkinOffice2010Silver, dxSkinOffice2013DarkGray, dxSkinOffice2013LightGray,
  dxSkinOffice2013White, dxSkinOffice2016Colorful, dxSkinOffice2016Dark,
  dxSkinOffice2019Black, dxSkinOffice2019Colorful, dxSkinOffice2019DarkGray,
  dxSkinOffice2019White, dxSkinPumpkin, dxSkinSeven, dxSkinSevenClassic,
  dxSkinSharp, dxSkinSharpPlus, dxSkinSilver, dxSkinSpringtime, dxSkinStardust,
  dxSkinSummer2008, dxSkinTheAsphaltWorld, dxSkinTheBezier,
  dxSkinsDefaultPainters, dxSkinValentine, dxSkinVisualStudio2013Blue,
  dxSkinVisualStudio2013Dark, dxSkinVisualStudio2013Light, dxSkinVS2010,
  dxSkinWhiteprint, dxSkinXmas2008Blue, cxGraphics, cxControls, cxLookAndFeels,
  cxLookAndFeelPainters, dxCore, dxRibbonSkins, dxRibbonCustomizationForm,
  System.Actions, Vcl.ActnList, Vcl.PlatformDefaultStyleActnCtrls, Vcl.ActnMan,
  dxRibbon, dxBar, cxClasses, DBGridEhGrouping, ToolCtrlsEh, DBGridEhToolCtrls,
  DynVarsEh, Data.DB, MemDS, DBAccess, Uni, EhLibVCL, GridsEh, DBAxisGridsEh,
  DBGridEh, Vcl.StdCtrls;

type
  TFItem_Type = class(TForm)
    dxBarManager1: TdxBarManager;
    dxBarMb1: TdxBar;
    dxBarMb2: TdxBar;
    dxBarMB3: TdxBar;
    dxBarManager1Bar1: TdxBar;
    dxbarmb4: TdxBar;
    dxBupdate: TdxBarButton;
    dxbarRefresh: TdxBarButton;
    dxBdelete: TdxBarButton;
    dxBarKimiaUpdate: TdxBarButton;
    dxBbaru: TdxBarLargeButton;
    dxBarKimiaBaru: TdxBarLargeButton;
    dxBarKimiaRefresh: TdxBarButton;
    dxBarKimiaDelete: TdxBarButton;
    BarKmsBaru: TdxBarLargeButton;
    BarKmsUpdate: TdxBarButton;
    BarKmsRefresh: TdxBarButton;
    BarKmsDelete: TdxBarButton;
    dxBarButton1: TdxBarButton;
    dxBarPenolong: TdxBarButton;
    dxBarButton3: TdxBarButton;
    dxBarLargeButton1: TdxBarLargeButton;
    dxBarLargeButton2: TdxBarLargeButton;
    dxBarButton4: TdxBarButton;
    dxBarlain: TdxBarButton;
    dxBarButton6: TdxBarButton;
    dxRibbon1: TdxRibbon;
    dxRibbon1Tab1: TdxRibbonTab;
    ActMenu: TActionManager;
    ActBaru: TAction;
    ActUpdate: TAction;
    ActRO: TAction;
    ActDel: TAction;
    ActPrint: TAction;
    ActApp: TAction;
    ActReject: TAction;
    ActClose: TAction;
    DBGridEh7: TDBGridEh;
    QType: TUniQuery;
    DsType: TDataSource;
    procedure ActBaruExecute(Sender: TObject);
    procedure ActROExecute(Sender: TObject);
    procedure ActUpdateExecute(Sender: TObject);
    procedure FormShow(Sender: TObject);
    procedure ActDelExecute(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  FItem_Type: TFItem_Type;
  nm_form:string;

implementation

{$R *.dfm}

uses UDataModule, UNew_ItemType, UMainMenu;

procedure TFItem_Type.ActBaruExecute(Sender: TObject);
begin
  with FNew_ItemType do
  begin
    show;
    statustr:=0;
    EdType.Clear;
  end;
end;

procedure TFItem_Type.ActDelExecute(Sender: TObject);
begin
  with dm.Qtemp do
  begin
    close;
    sql.Clear;
    sql.Text:='Update master_data.t_item_type set deleted_at=now(),deleted_by=:deleted_by where "id"=:id';
              ParamByName('deleted_by').Value:=nm;
              ParamByName('id').Value:=QType['id'];
    ExecSQL;
  end;
end;

procedure TFItem_Type.ActROExecute(Sender: TObject);
begin
//  DBGridEh7.StartLoadingStatus();
    QType.Close;
    QType.Open;
//  DBGridEh7.FinishLoadingStatus();
end;

procedure TFItem_Type.ActUpdateExecute(Sender: TObject);
begin
  with FNew_ItemType do
  begin
    show;
    statustr:=1;
    id:=QType['id'];
    EdType.Text:=QType['type'];
  end;
end;

procedure TFItem_Type.FormShow(Sender: TObject);
begin
  ActROExecute(sender);
end;

end.
